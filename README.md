### flask项目接口文档

#### 1. 获取access_token

| dwbh(单位编号)     | keyid（密钥）    | timestamp（时间戳） |
| ------------------ | ---------------- | ------------------- |
| 必填（string类型） | 必填(string类型) | 必填(string类型)    |

* api接口地址：/api/v1.0/get_token(***\*调用请求参数实例：请求数据类型（json格式），请求方式 (POST)\**** )

  ```
  {
      "dwbh":"DWI00000299",  # 单位编号（接口供应方提供）
      "keyid":"hjyy123",     # 密钥 （接口供应方提供）
      "timestamp":""         # 生成的时间戳(10位)
  }
  ```

  

+ 响应结果：

  ```
  {
      "info": {
          "access_token": "c74b5b9aada66e4cdc16726dc493e682", # 重复请求access_token值会刷新重置
          "errmsg": "请求成功！",
          "errno": "200",
          "expires_in": 3600    # access_token有效时间
   
   }
  }
  ```

#### 2. 获取商品库存信息

| access_token(token令牌) | dwbh(单位内码)     | goods_salt           |
| ----------------------- | ------------------ | -------------------- |
| 必填（string类型）      | 必填（string类型） | 必填（（string类型） |

* api接口地址：/api/v1.0/order_info（***\*调用请求参数实例：请求数据类型（json格式），请求方式 (POST)\****）

  ```
  {
     "access_token":"c74b5b9aada66e4cdc16726dc493e682", # 请求令牌
     "dwbh":"DWI00000299", # 单位内码
     "goods_salt":"all"   # 验证值(all)
  
  }
  ```

* 响应结果：

  ```
  {
      "info": {
          "data": [
              {
                  "bz": "300", # 件包装
                  "dw": "盒", # 单位
                  "hshj_xs1": "0.50", # 单价
                  "pizhwh": "国药准字H51023593", # 批准文号
                  "scrq": "2019-08-03", # 生成日期
                  "shengccj": "成都倍特药业有限公司", # 生成厂家
                  "shl": "1011", # 库存数量
                  "shlv": "13.00", # 税率
                  "shpgg": "12粒", # 规格
                  "spid": "SPH00013070", # 商品内码
                  "spmch": "甲硝唑芬布芬胶囊", # 商品名称
                  "yxq": "2021-08-02", # 有效期
                  "zbz": "10" # 中包装
              },
              {
                  "bz": "240",
                  "dw": "盒",
                  "hshj_xs1": "16.50",
                  "pizhwh": "国药准字H20020240",
                  "scrq": "2020-09-11",
                  "shengccj": "上海现代制药股份有限公司",
                  "shl": "120",
                  "shlv": "13.00",
                  "shpgg": "0.1875g*12s",
                  "spid": "SPH00017465",
                  "spmch": "头孢克洛缓释胶囊",
                  "yxq": "2022-08-31",
                  "zbz": "10"
              }      
          ],
          "errmsg": "请求成功！",
          "errno": "200"
      }
  }
  ```

  

#### 3. 获取出库信息

| access_token(token令牌) | dwbh(单位内码)     | rq(出库日期)       |
| ----------------------- | ------------------ | ------------------ |
| 必填（string类型）      | 必填（string类型） | 必填（string类型） |

+ api接口地址：/api/v1.0/orders_outstore(***\*调用请求参数实例：请求数据类型（json格式），请求方式 (POST)\****)

  ```
  {
      "rq":"2021-01-21",
      "dwbh":"DWI00000299",
      "access_token":"c74b5b9aada66e4cdc16726dc493e682"
  }
  ```

+ 响应结果：

  ```
  {
      "info": {
          "data": [
              {
                  "chkhsje": "2832.00", # 出库金额
                  "chkshl": "200.00", # 出库数量
                  "dj_sn": 1, # 订单序号
                  "djbh": "XSAZDA00458074", # 单据编号
                  "dw": "盒", # 单位
                  "dwmch": "安徽省华嘉医药有限公司", # 单位名称
                  "pihao": "S200513", # 批号
                  "pizhwh": "国药准字H20140135", # 批准文号
                  "rq": "2021-01-21", # 出库日期
                  "shengccj": "海南通用三洋药业有限公司", # 生产厂家
                  "shpgg": "5mg*14s", # 商品规格
                  "spid": "SPH00012568", # 商品内码
                  "spmch": "瑞舒伐他汀钙胶囊" # 商品名称
              }
          ],
          "errmsg": "请求成功！",
          "errno": "200"
      }
  }
  ```

  